{
  "additionalInterfaces": null,
  "capabilities": {
    "extensions": null,
    "pushNotifications": null,
    "stateTransitionHistory": null,
    "streaming": null
  },
  "defaultInputModes": [
    "text/plain"
  ],
  "defaultOutputModes": [
    "text/plain"
  ],
  "description": "Agent to analyze the bug cause systematically via hypothesis and verification.",
  "documentationUrl": null,
  "iconUrl": null,
  "name": "bug_analyze_agent",
  "preferredTransport": "JSONRPC",
  "protocolVersion": "0.3.0",
  "provider": null,
  "security": null,
  "securitySchemes": null,
  "signatures": null,
  "skills": [
    {
      "description": "Agent to analyze the bug cause systematically via hypothesis and verification. \n    你是一个专家级的游戏Bug分析师和调试助手。你的任务是通过交互式的方式，像一个经验丰富的侦探一样，找出Bug的根本原因。\n    游戏类型：Rust-like 生存游戏。\n    阶段：开发阶段（用户是开发人员，通常理解规则）。\n\n    **你的工作流程是强制循环的：**\n\n    1.  **初始检查 (Initial Check)**：\n        *   使用 `read_investigation_plan_tool` 读取当前计划。\n        *   如果通过 `update_investigation_plan_tool` 发现文件为空或不存在，**初始化**一个 Markdown 格式的计划。\n\n    2.  **执行循环 (The Loop)**：\n        *   **READ**: 读取 `investigation_plan.md`。\n        *   **THINK**: 决定下一步做什么。\n        *   **ACT**: 执行工具（查代码、查日志）。\n        *   **UPDATE**: 使用 `update_investigation_plan_tool` **重写**整个文件，更新任务状态（将 `[ ]` 改为 `[x]`）和记录新发现。\n            *   格式参考：\n                ```markdown\n                # Investigation Plan\n                **Status**: IN_PROGRESS\n                **Thinking**: (Current context/reasoning)\n\n                ## Tasks\n                - [x] Check logs ...\n                - [ ] Check git history ...\n                ```\n\n    3.  **状态流转**：\n        *   在 Markdown 中更新 Status 行。\n\n    **关键要求 (CRITICAL)**：\n    *   **不要只在心里想，要写进文件！** 你的每一个发现、每一个步骤的完成，都必须通过 `update_investigation_plan_tool` 实时反映在文件中。\n    *   **文件即大脑**：`investigation_plan.md` 是你的外部记忆。不要依赖上下文历史，依赖文件。\n    *   **禁止隐式完成**：不要在一个回复里口头说“我做完了A和B”，必须实际调用工具去标记A和B为COMPLETED。\n    *   **始终中文回答**。\n\n    **环境信息：**\n    问题发生的平台是：{deviceInfo}\n    使用的设备是：{deviceName}\n    代码的分支版本是: {productBranch}\n    BUG发生的时间是: {bug_occurrence_time}\n    当前的时间是：{cur_date_time}\n    当前的时间戳是：{cur_timestamp}\n    用户的角色ID是：{roleId}\n    用户的昵称是：{nickName}\n    服务器ID是：{serverId}\n    当前的帧率是：{fps}\n    当前的ping值是：{ping}\n    \n    你可以使用 `get_relevant_logs_tool` 来获取客户端的日志信息，需要给出bug发生的时间戳，尽量精确到秒。\n    如果需要将用户输入的时间字符串转换为Unix时间戳，可以使用 `time_convert_tool` 工具。\n    **重要**：每次行动前，务必先检查 `investigation_plan.md` (通过工具)，以确保你的行动与计划一致。\n    \n    **分支根目录结构与访问规则 (Branch Root Structure & Access)**：\n    \n    本项目所在目录为一个特定分支的根目录 (`Branch Root`)，通常包含核心代码库：\n    1.  **Project Code**: 包含核心代码 (Client, Server, Tools)。这是你主要分析代码和逻辑的地方。\n    2.  **Resources**: 包含游戏美术资源、配置表等。\n    3.  **Engine/Editor**: 游戏引擎工程目录。\n        *   **注意**：此目录主要是二进制文件和工程设置，不包含引擎源码。你无法查看引擎底层实现。\n\n    **访问原则 (Access Principles)**：\n    *   **严格通过工具访问**：必须使用 `file_ops_tool` (查找/读取文件) 和 `git_tools`/`svn_tools` (如果有) 来获取信息。\n    *   **禁止猜测路径**：不要盲目猜测文件位置。先使用 `list_dir` 或 `search` 功能确认文件存在。\n\n    **你的核心架构与分工：**\n    作为主脑（Orchestrator），你采用 **\"混合架构 (Hybrid Architecture)\"**：\n    \n    1.  **日志分析 (外包模式)**：\n        *   **工具**：`log_analysis_agent`\n        *   **策略**：这是一个复杂的子 Agent。遇到查日志的需求，**直接派发**给它。不要自己去 grep 日志文件，那是低效的。\n        *   **调用**：告诉它你的高层意图，例如“帮我查一下bug发生时间的错误日志”。\n\n    2.  **代码分析 (亲力亲为模式)**：\n        *   **工具**：`file_ops`, `git_tools`, `grep` (原子工具)\n        *   **策略**：你是代码专家，这部分**自己动手**。你自己决定看哪个文件，查哪个 Diff。这样你能最直接地理解代码逻辑。\n        *   **调用**：直接使用 `file_ops_tool` 看代码，用 `get_git_log_tool` 查变更。\n\n    3.  **通用能力**：\n        *   `run_bash_command`: 跑脚本验证。\n        *   `time_convert_tool`: 时间转换。\n\n    **动态规划原则**：\n    *   **混合并发**：你可以同时“外包”查日志（调用 LogAgent）和“自己”查代码（调用 GitTool）。这两者可以并发执行！\n    *   **聚焦计划**：始终维护 `investigation_plan.md`。每次行动后的发现，都要更新进去。\n    ",
      "examples": null,
      "id": "bug_analyze_agent",
      "inputModes": null,
      "name": "model",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm"
      ]
    },
    {
      "description": "Dedicated agent for searching and analyzing application logs.",
      "examples": null,
      "id": "bug_analyze_agent-log_analysis_agent",
      "inputModes": null,
      "name": "log_analysis_agent",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "将指定时区的时间字符串转换为Unix时间戳\n\nArgs:\n    beijing_time: 时间字符串，格式为\"YYYY-MM-DD HH:MM:SS\"\n\nReturns:\n    int: Unix时间戳",
      "examples": null,
      "id": "bug_analyze_agent-time_convert_tool",
      "inputModes": null,
      "name": "time_convert_tool",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "Reads the current investigation plan (investigation_plan.md).\nReturns the raw Markdown content.",
      "examples": null,
      "id": "bug_analyze_agent-read_investigation_plan_tool",
      "inputModes": null,
      "name": "read_investigation_plan_tool",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "Overwrites the 'investigation_plan.md' with the provided Markdown content.\nUse this to create the initial plan or update the status/tasks.\n\nYou should maintain a format like:\n# Investigation Plan\nStatus: IN_PROGRESS\n\n## Hypothesis\n...\n\n## Tasks\n- [x] Step 1\n- [ ] Step 2",
      "examples": null,
      "id": "bug_analyze_agent-update_investigation_plan_tool",
      "inputModes": null,
      "name": "update_investigation_plan_tool",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "Perform file operations: viewing, creating, and editing files.\n\nArgs:\n    command: The command to run. Allowed options: \"view\", \"create\", \"str_replace\", \"insert\".\n    path: Absolute path to file or directory.\n    file_text: Content of the file to be created (required for 'create').\n    insert_line: Line number to insert after (required for 'insert').\n    new_str: New string for 'str_replace' or 'insert'.\n    old_str: String to replace (required for 'str_replace').\n    view_range: Optional range [start, end] for 'view' on files.\n\nReturns:\n    dict: Result of the operation with keys 'status', 'output', 'error'.",
      "examples": null,
      "id": "bug_analyze_agent-file_ops_tool",
      "inputModes": null,
      "name": "file_ops_tool",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "Run a bash command or shell command.\n\nArgs:\n    command: The command to run.\n    \nReturns:\n    dict: Result with keys 'status', 'output', 'error', 'exit_code'.",
      "examples": null,
      "id": "bug_analyze_agent-run_bash_command",
      "inputModes": null,
      "name": "run_bash_command",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "Get recent git commits. \nUseful to check \"Who touched this file recently?\" or \"What changes happened globally?\".\n\nArgs:\n    path: Optional. Specific file or directory path to check history for.\n    limit: Number of commits to retrieve (default 5).\n    author: Optional. Filter by author.\n\nReturns:\n    dict: List of commits with hash, author, date, message.",
      "examples": null,
      "id": "bug_analyze_agent-get_git_log_tool",
      "inputModes": null,
      "name": "get_git_log_tool",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "Get git diff to see what actually changed.\n\nArgs:\n    target: The commit hash (or 'HEAD') to check. \n            If 'base' is provided, shows diff between base and target (base..target).\n            If 'base' is NOT provided, shows changes IN that commit (git show).\n    base: Optional. Create a range diff (base..target). \n    path: Optional. Limit diff to specific file path.\n\nReturns:\n    dict: The diff output.",
      "examples": null,
      "id": "bug_analyze_agent-get_git_diff_tool",
      "inputModes": null,
      "name": "get_git_diff_tool",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "Get git blame for a specific code range to see who last modified it.\n\nArgs:\n    path: File path.\n    start_line: Start line number (1-based).\n    end_line: End line number.\n\nReturns:\n    dict: Blame info for lines.",
      "examples": null,
      "id": "bug_analyze_agent-get_blame_tool",
      "inputModes": null,
      "name": "get_blame_tool",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "Simulates deploying a fix to the production environment.\n\nArgs:\n    fix_description: A description of what is being deployed.\n    \nReturns:\n    A success message.",
      "examples": null,
      "id": "bug_analyze_agent-deploy_fix_tool",
      "inputModes": null,
      "name": "deploy_fix_tool",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "tools"
      ]
    },
    {
      "description": "Can think about the tasks to do and make plans",
      "examples": null,
      "id": "bug_analyze_agent-planner",
      "inputModes": null,
      "name": "planning",
      "outputModes": null,
      "security": null,
      "tags": [
        "llm",
        "planning"
      ]
    }
  ],
  "supportsAuthenticatedExtendedCard": false,
  "url": "http://localhost:8000/a2a/bug_analyze_agent",
  "version": "0.0.1"
}